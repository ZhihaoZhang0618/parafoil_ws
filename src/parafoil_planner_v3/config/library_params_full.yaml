parafoil_planner_v3:
  ros__parameters:
    generation:
      method: "gpm"            # template | gpm
      # High-risk focused grid (non-uniform; high wind + long distance + low altitude).
      wind_speeds: [6.0, 7.0, 9.0, 12.0]
      wind_directions: [0, 45, 90, 135, 180, 225, 270, 315]
      initial_altitudes: [20, 40, 60]
      target_distances: [150, 220, 300, 400]
      target_bearings: [0, 45, 90, 135, 180, 225, 270, 315]
      trajectory_types: ["DIRECT", "S_TURN"]

      num_workers: "auto"

      gpm:
        method: "SLSQP"
        solve_mode: "least_squares"
        dynamics_mode: "mixed"       # simplified | 6dof | mixed (sample 6dof for validation)
        sixdof_ratio: 0.05
        sixdof_seed: 7
        num_nodes: 12
        scheme: "LGL"
        max_iterations: 200
        tolerance: 1.0e-6
        w_u_ref: 2.0
        delta_a_amp: 0.4
        s_turn_cycles: 2.0
        spiral_delta_a_sign: 1.0
        rollout_dt: 0.2
        brake_min: 0.0
        brake_max: 0.6
        brake_fallback: 0.2
        max_violation_accept: 0.5
        lsq_max_nfev: 30
        lsq_w_dynamics: 1.0
        lsq_w_boundary: 10.0
        lsq_w_ineq: 10.0
        u_ref_min: 0.001
        u_ref_max: 1.0
        lsq_x_scale: "jac"
        lsq_diag_grad_max: 50
        lsq_x0_bound_eps: 0.001
        # Shape constraints (post-check)
        shape_enforce: true
        shape_turn_eps_deg: 3.0
        direct_max_total_turn_deg: 60.0
        direct_max_net_turn_deg: 45.0
        s_turn_min_total_turn_deg: 90.0
        s_turn_max_net_turn_deg: 45.0
        s_turn_min_sign_changes: 1
        racetrack_min_total_turn_deg: 150.0
        racetrack_max_net_turn_deg: 60.0
        racetrack_min_turn_clusters: 2
        racetrack_min_turn_fraction: 0.75
        spiral_min_turns: 1.0
        spiral_min_turn_fraction: 0.9

    matching:
      k_neighbors: 5
      feature_weights:
        altitude: 0.2
        distance: 0.25
        bearing: 0.15
        wind_speed: 0.2
        wind_angle: 0.2
